Just, any fucking C compiler which can create packed structs and write files man. That is all you ever need to create anything.

For testing, you either raw-dog and try to boot on real hardware, chances are you'll fuck something up real bad.

So, we use `qemu-system-x86_84` for a virtual computer.

But the virtual computer doesn't have a UEFI bios for some reason, so you have to download a raw binary implementation of UEFI and then tell `qemu` to use that as the firmware specifically. For this we use the **Tianacore OVMF** 
You can get a built OVMF by Gregg Hoffman [here](https://www.kraxel.org/repos/) 

To ensure you have a valid qemu virtual environment test it with:
```bash
qemu-system-x86_64 -bios <path-to-efi-file> -net none
```

The `-bios` flag tells qemu which file to use as firmware, so obtain the file from the Gregg Hoffman build of OVMF linked above.

The `-net none` flag is used, because, without any device/medium to boot from, the firmware tries PIXIE-or-something boot which basically uses the internet to find any devices to boot from? idk how that works, but to disable that behavior and jump into a UEFI shell the `-net none` option should be given.

You now should land into a UEFI shell which looks something like
![[uefi shell.png]]

To test whether a disk image is valid GPT or not before flashing it onto a drive, we can use any disk utility, like `sgdisk`



#### DOCS
- To be able to write a valid GPT disk image, and then maybe later create a bootloader or something which works on any UEFI firmware, we will refer to the [UEFI spec](https://uefi.org/sites/default/files/resources/UEFI_Spec_Final_2.11.pdf) for how a GPT-ed disk should be.

- To fill GPT Headers you need the GUID spec given by  [RFC 4122](https://datatracker.ietf.org/doc/html/rfc4122) , and we steal some code for CRC32 calculations from the [internet](https://www.w3.org/TR/png/#D-CRCAppendix)

- For the EFI System Partition, the FAT32 Filesystem specification can be found [here](https://www.cs.fsu.edu/~cop4610t/assignments/project3/spec/fatspec.pdf)

- For how FAT entries work [read](https://en.wikipedia.org/wiki/Design_of_the_FAT_file_system#Cluster_map)